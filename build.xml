<project name="gsafeed" default="build" basedir=".">
  <description>Feed Files for GSA</description>
  <tstamp/>
  <property name="src.dir" location="src"/>
  <property name="build.dir" location="build"/>
  <property name="build-src.dir" location="${build.dir}/src"/>
  <property file="build.properties"/>
  <property name="compile.java.version" value="7"/>
  <property name="compile.java.bootclasspath"
            value="${build.bootclasspath}"/>

  <path id="examples.run.classpath">
    <path location="examples"/>
  </path>

  <target name="build"
    depends="-real-build"
    description="Build source"/>

  <target name="-real-build">
    <mkdir dir="${build-src.dir}"/>
    <javac srcdir="${src.dir}" destdir="${build-src.dir}" debug="true"
      includeantruntime="false" encoding="utf-8"
      source="${compile.java.version}" target="${compile.java.version}">
      <bootclasspath path="${compile.java.bootclasspath}"/>
      <compilerarg value="-Xlint:unchecked"/>
    </javac>
  </target>

  <target name="clean" description="Remove build output">
    <delete dir="${build.dir}"/>
  </target>

  <target name="marshal_unmarshal" depends="build"
      description="Marshal/unmarshal example">
    <property name="example.args" value="/metadata-and-url.xml"/>
    <java classpath="${build-src.dir}" fork="true"
      classname="com.google.enterprise.gsafeed.examples.MarshalUnmarshal">
      <classpath refid="examples.run.classpath"/>
      <arg line="${example.args}"/>
    </java>
  </target>
</project>
